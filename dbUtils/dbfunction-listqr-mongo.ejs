const { HttpServerError, BadRequestError, NotFoundError } = require("common");
const { <%= dbObject.modelName %> } = require('models');


const get<%= dbObject.modelName %>ListByQuery = async (query) => {
    try {

      if (!query || typeof query !== "object") {
        throw new BadRequestError("Invalid query provided. Query must be an object.");
      }

      const <%= dbObject.objectName %> = await <%= dbObject.modelName %>.find(query);

      if (!<%= dbObject.objectName %> || <%= dbObject.objectName %>.length === 0) return [];

      return <%= dbObject.objectName %>.map(item => item.getData());
      
    } catch (err) {
      //**errorLog
      throw new HttpServerError("errMsg_dbErrorWhenRequesting<%= dbObject.modelName %>ListByQuery", err);
    }
};

module.exports = get<%= dbObject.modelName %>ListByQuery;
