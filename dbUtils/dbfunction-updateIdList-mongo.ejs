const { HttpServerError } =
  require("common");

const { <%= dbObject.modelName %> } = require("models");

const update<%= dbObject.modelName %>ByIdList = async (idList, dataClause) => {
  try {

    <% if (dbObject.objectSettings.basicSettings.useSoftDelete) { %>
    await <%= dbObject.modelName %>.updateMany(
      { _id: { $in: idList }, isActive: true },
      dataClause
    );

    const updatedDocs = await <%= dbObject.modelName %>.find(
      { _id: { $in: idList }, isActive: true },
      { _id: 1 } 
    );
    <% } else { %>
    await <%= dbObject.modelName %>.updateMany(
      { _id: { $in: idList } },
      dataClause
    );

    const updatedDocs = await <%= dbObject.modelName %>.find(
      { _id: { $in: idList } },
      { _id: 1 } 
    );
    <% } %>

    const <%= dbObject.objectName %>IdList = updatedDocs.map((doc) => doc._id);

    return <%= dbObject.objectName %>IdList;
    
  } catch (err) {
    //**errorLog
    throw new HttpServerError("errMsg_dbErrorWhenUpdating<%= dbObject.modelName %>ByIdList", err);
  }
};

module.exports = update<%= dbObject.modelName %>ByIdList;
